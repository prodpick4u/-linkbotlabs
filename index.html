import os

def generate_product_block(product):
    return f"""
    <div class="product">
        <h2>{product['title']}</h2>
        <img src="{product['image']}" alt="{product['title']}" style="width:200px;">
        <p><strong>Price:</strong> {product['price']}</p>
        <p><strong>Pros:</strong> {product.get('pros', 'N/A')}</p>
        <p><strong>Cons:</strong> {product.get('cons', 'N/A')}</p>
        <p><a href="{product['link']}" target="_blank">Buy on Amazon</a></p>
    </div>
    <hr/>
    """

def generate_post_html(products, template_path, output_path):
    with open(template_path, 'r', encoding='utf-8') as f:
        template = f.read()
    product_blocks = ''.join(generate_product_block(p) for p in products)
    html_content = template.replace('{{PRODUCT_BLOCKS}}', product_blocks)
    os.makedirs(os.path.dirname(output_path), exist_ok=True)
    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(html_content)
    print(f"‚úÖ Generated {output_path}")

def generate_index_html(categories, template_path, output_path):
    with open(template_path, 'r', encoding='utf-8') as f:
        template = f.read()

    list_items = ""
    post_divs = ""
    for cat in categories:
        list_items += f'<li><a href="{cat["post_path"]}">{cat["emoji"]} {cat["title"]}</a></li>\n'
        post_divs += f"""
        <div class="category">
            <h2><a href="{cat["post_path"]}">{cat["emoji"]} {cat["title"]}</a></h2>
            <p>{cat["description"]}</p>
        </div>
        """

    html_content = template.replace('{{CATEGORY_LINKS}}', list_items)
    html_content = html_content.replace('{{POST_DIVS}}', post_divs)

    os.makedirs(os.path.dirname(output_path), exist_ok=True)
    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(html_content)
    print(f"‚úÖ Generated {output_path}")

if __name__ == "__main__":
    # Example product data
    kitchen_products = [...]  # already filled
    outdoor_products = [...]  # already filled
    beauty_products = [...]   # already filled

    categories = [
        {
            "title": "Top Kitchen Gadgets for 2025",
            "emoji": "ü•ò",
            "description": "Discover the latest and greatest kitchen gadgets that will make your cooking easier and more fun.",
            "post_path": "posts/post-kitchen.html",
            "products": kitchen_products,
            "template": "templates/post-kitchen-template.html"
        },
        {
            "title": "Best Outdoor Gear This Season",
            "emoji": "üèïÔ∏è",
            "description": "Explore the best outdoor gear to keep you prepared for your next adventure.",
            "post_path": "posts/post-outdoor.html",
            "products": outdoor_products,
            "template": "templates/post-outdoor-template.html"
        },
        {
            "title": "Must-Have Beauty Products",
            "emoji": "üíÑ",
            "description": "Your skincare and makeup essentials for 2025.",
            "post_path": "posts/post-beauty.html",
            "products": beauty_products,
            "template": "templates/post-beauty-template.html"
        }
    ]

    # Generate all category posts
    for cat in categories:
        generate_post_html(cat["products"], cat["template"], cat["post_path"])

    # Generate front page
    generate_index_html(categories, "templates/index-template.html", "index.html")
