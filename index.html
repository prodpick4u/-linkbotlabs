def generate_product_block(product):
    return f'''
    <div class="product">
      <h2>{product["title"]}</h2>
      <img src="{product.get("image", "")}" alt="{product["title"]}" />
      <p><strong>Price:</strong> {product["price"]}</p>
      <p><strong>Pros:</strong> {product.get("pros", "N/A")}</p>
      <p><strong>Cons:</strong> {product.get("cons", "N/A")}</p>
      <a href="{product.get("link", "#")}" target="_blank" rel="noopener noreferrer">Buy on Amazon</a>
    </div>
    '''

def generate_post_html(products, template_path, output_path):
    with open(template_path, 'r', encoding='utf-8') as f:
        template = f.read()

    product_blocks = ''.join(generate_product_block(p) for p in products)

    html_content = template.replace('{{PRODUCT_BLOCKS}}', product_blocks)

    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(html_content)

    print(f"✅ Generated {output_path}")

# Example usage:
if __name__ == "__main__":
    # Sample product data — replace with your fetched product list
    sample_products = [
        {
            "title": "Super Blender 3000",
            "image": "https://example.com/blender.jpg",
            "price": "$99.99",
            "pros": "Powerful, Durable",
            "cons": "Noisy",
            "link": "https://www.amazon.com/dp/B12345"
        },
        {
            "title": "Non-stick Frying Pan",
            "image": "https://example.com/pan.jpg",
            "price": "$29.99",
            "pros": "Easy to clean, Affordable",
            "cons": "Handle gets hot",
            "link": "https://www.amazon.com/dp/B67890"
        },
        {
            "title": "Digital Kitchen Scale",
            "image": "https://example.com/scale.jpg",
            "price": "$15.49",
            "pros": "Accurate, Compact",
            "cons": "Small display",
            "link": "https://www.amazon.com/dp/B11223"
        }
    ]

    generate_post_html(
        products=sample_products,
        template_path="templates/post-kitchen-template.html",  # your template file
        output_path="docs/posts/post-kitchen.html"             # output folder/file
    )
