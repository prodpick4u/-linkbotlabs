<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸš€ LinkBotLabs AI Gateway</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
    font-family:'Inter',sans-serif; margin:0; padding:1rem; background:#0a0033; color:#fff;
}
h1,h2 { color:#6af; }
section { margin-bottom:2rem; padding:1rem; background: rgba(0,0,0,0.5); border-radius:10px; }
input, select { width: 80%; padding:10px; border-radius:5px; border:none; margin-right:5px; }
button { padding:10px 15px; border:none; border-radius:5px; background: linear-gradient(135deg,#6a11cb,#2575fc); color:#fff; cursor:pointer; }
.ai-box { border:1px solid #666; padding:10px; margin-top:10px; max-height:250px; overflow-y:auto; background: rgba(0,0,0,0.2); border-radius:6px; }
.ai-box img { max-width:100%; border-radius:5px; margin-top:5px; }
.product-card { background: rgba(255,255,255,0.1); padding:10px; margin:10px 0; border-radius:5px; }
.product-card a { display:inline-block; margin-top:5px; padding:5px 10px; background:#2575fc; color:#fff; text-decoration:none; border-radius:5px; }
</style>
</head>
<body>

<h1>ðŸš€ LinkBotLabs AI Gateway</h1>
<p>Ask questions, get product suggestions, generate TTS, and create images.</p>

<!-- TTS Voice Selector -->
<div>
<label>Select TTS Voice:</label>
<select id="voiceSelect"></select>
</div>

<!-- Multi-AI Chat Sections -->
<section>
<h2>GPT-5</h2>
<div class="ai-box" id="gpt5Box"></div>
</section>

<section>
<h2>Claude</h2>
<div class="ai-box" id="claudeBox"></div>
</section>

<section>
<h2>Grok</h2>
<div class="ai-box" id="grokBox"></div>
</section>

<section>
<h2>Gemini</h2>
<div class="ai-box" id="geminiBox"></div>
</section>

<!-- DALL-E Image Generation -->
<section>
<h2>DALL-E Image Generation</h2>
<div class="ai-box" id="dalleBox"></div>
</section>

<!-- Chat input -->
<section>
<input type="text" id="chatInput" placeholder="Ask a question...">
<button id="sendBtn">Send</button>
</section>

<!-- Affiliate Registration -->
<section>
<h2>ðŸ”‘ Register Affiliate ID</h2>
<input type="text" id="affiliateID" placeholder="Enter your tag">
<button id="saveAffiliateBtn">Save Affiliate</button>
<p id="affiliateOutput"></p>
</section>

<!-- Trending Products -->
<section>
<h2>ðŸ›’ Trending Products</h2>
<div id="productContainer"></div>
</section>

<!-- Puter.js -->
<script src="https://js.puter.com/v2/"></script>

<script>
// Initialize Puter & TTS
const puter = new Puter({ debug:true });
const synth = window.speechSynthesis;

// ---- Voice Selector ----
function populateVoiceSelect(){
    let voices = synth.getVoices();
    if(!voices.length){ setTimeout(populateVoiceSelect,100); return; }
    voices = voices.filter(v=>v.lang.startsWith('en'));
    const select = document.querySelector('#voiceSelect');
    select.innerHTML = '';
    voices.forEach(v=>{
        const opt = document.createElement('option');
        opt.value = v.name; opt.textContent = v.name + ' (' + v.lang + ')';
        select.appendChild(opt);
    });
    select.value = voices[0]?.name;
}
if(speechSynthesis.onvoiceschanged!==undefined){ speechSynthesis.onvoiceschanged = populateVoiceSelect; } 
else { populateVoiceSelect(); }

function playTTS(text){
    if(synth.speaking) synth.cancel();
    const utter = new SpeechSynthesisUtterance(text);
    utter.voice = synth.getVoices().find(v=>v.name === document.querySelector('#voiceSelect').value);
    synth.speak(utter);
}

// ---- AI Boxes ----
const aiBoxes = {
    'gpt-5': document.getElementById('gpt5Box'),
    'claude': document.getElementById('claudeBox'),
    'grok': document.getElementById('grokBox'),
    'gemini': document.getElementById('geminiBox'),
    'dalle': document.getElementById('dalleBox')
};

// Chat input
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');

sendBtn.addEventListener('click', askAI);
chatInput.addEventListener('keypress', e=>{ if(e.key==='Enter') askAI(); });

async function askAI(){
    const question = chatInput.value.trim();
    if(!question) return;
    chatInput.value='';

    for(const model of ['gpt-5','claude','grok','gemini']){
        try{
            const res = await puter.ai.chat(`Answer clearly: "${question}"`, { model });
            const text = res.text || res;
            aiBoxes[model].innerHTML += `<p>${text}</p>`;
            aiBoxes[model].scrollTop = aiBoxes[model].scrollHeight;
            playTTS(text);
        } catch(e){ console.warn(model + " failed", e); }
    }

    try{
        const imgEl = await puter.ai.txt2img(question);
        aiBoxes['dalle'].appendChild(imgEl);
        aiBoxes['dalle'].scrollTop = aiBoxes['dalle'].scrollHeight;
    } catch(e){ console.warn("DALL-E failed", e); }
}

// ---- Affiliate ----
const saveAffiliateBtn = document.getElementById('saveAffiliateBtn');
saveAffiliateBtn?.addEventListener('click', ()=>{
    const tag = document.getElementById('affiliateID').value.trim();
    if(tag){
        localStorage.setItem('affiliateTag', tag);
        document.getElementById('affiliateOutput').innerText = `âœ… Affiliate ID "${tag}" saved!`;
    }
});

// ---- Products ----
async function generateProducts(category="Trending"){
    const container = document.getElementById('productContainer');
    if(!container) return;
    container.innerHTML = "";
    const affiliateTag = localStorage.getItem('affiliateTag') || "";
    try{
        const response = await puter.ai.chat(
            `Generate 5 trending Amazon products for ${category} category, JSON format [{name, link}]`,
            { model: "gpt-5" }
        );
        let products = [];
        try{ products = JSON.parse(response.text); } 
        catch{ products = Array.from({length:5},(_,i)=>({name:`${category} Product ${i+1}`, link:"#"})); }

        for(const p of products){
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `<h4>${p.name}</h4>
                              <a href="${p.link + (p.link.includes('?')?'&':'?')+'tag='+affiliateTag}">Buy Now</a>`;
            container.appendChild(card);
        }
    } catch(err){ console.warn("Product generation failed", err); }
}
generateProducts();
</script>

</body>
</html>
