<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Playground</title>
<link rel="stylesheet" href="mobile.css">
<script src="https://js.puter.com/v2/"></script>
<style>
  body { font-family: 'Segoe UI', sans-serif; background:#0d0d1a; color:#fff; margin:0; padding:0;}
  header, footer { text-align:center; padding:10px; background:#111; }
  main { padding:20px; max-width:800px; margin:auto; }
  .box { background:#1a1a2e; padding:15px; margin:15px 0; border-radius:8px; }
  input, select, button { padding:10px; margin:5px 0; width:100%; max-width:100%; }
  .splash { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); color:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; z-index:9999; padding:20px; }
</style>
</head>
<body>

<header>
  <h1>üöÄ AI Playground by LinkBotLabs</h1>
  <p>Powered by <a href="https://puter.com" target="_blank" style="color:#4fc3f7;">Puter.com</a></p>
</header>

<!-- DEMO SPLASH -->
<div id="demoSplash" class="splash">
  <h1>üéâ Welcome to Playground Demo</h1>
  <p>You have <b>60 minutes</b> of free AI playtime.</p>
  <button onclick="closeDemoSplash()">Start Exploring üöÄ</button>
</div>

<!-- DONATION SPLASH -->
<div id="donationSplash" class="splash" style="display:none;">
  <h1>üíñ Playground Playtime Unlocked</h1>
  <p>Your demo has ended. To keep exploring, support us with a small donation.</p>
  <a href="https://wise.com/pay/me/davids14542" target="_blank">
    <button>Donate & Unlock</button>
  </a>
</div>

<main id="playground">

  <!-- Chat AI -->
  <div class="box">
    <h2>üí¨ Chat AI</h2>
    <select id="chatModel" onchange="updateModelInfo()">
      <option value="gpt-5-mini">GPT-5 Mini</option>
      <option value="gpt-5">GPT-5</option>
      <option value="gpt-4o-mini">GPT-4o Mini</option>
      <option value="gpt-4.1-nano">GPT-4.1 Nano</option>
      <option value="claude-1">Claude 1</option>
      <option value="claude-2">Claude 2</option>
      <option value="gemini-1">Gemini 1</option>
      <option value="gemini-1.5">Gemini 1.5</option>
      <option value="grok-3.5">Grok 3.5</option>
      <option value="grok-4">Grok 4</option>
      <option value="deep-seek">Deep Seek</option>
    </select>
    <p id="modelInfo" style="font-size:0.9em; color:#ccc; margin-top:5px;">Select a model to see details</p>
    <input id="chatInput" placeholder="Ask me anything...">
    <button onclick="runChat()">Run</button>
    <div id="chatOutput"></div>
  </div>

  <!-- AI Streaming -->
  <div class="box">
    <h2>üìπ AI Streaming</h2>
    <select id="streamModel" onchange="updateStreamInfo()">
      <option value="gpt-5-mini">GPT-5 Mini</option>
      <option value="gpt-5">GPT-5</option>
      <option value="gpt-4o-mini">GPT-4o Mini</option>
      <option value="gpt-4.1-nano">GPT-4.1 Nano</option>
      <option value="claude-1">Claude 1</option>
      <option value="claude-2">Claude 2</option>
      <option value="gemini-1">Gemini 1</option>
      <option value="gemini-1.5">Gemini 1.5</option>
      <option value="grok-3.5">Grok 3.5</option>
      <option value="grok-4">Grok 4</option>
      <option value="deep-seek">Deep Seek</option>
    </select>
    <p id="streamInfo" style="font-size:0.9em; color:#ccc; margin-top:5px;">Select a model to see details</p>
    <input id="streamInput" placeholder="Ask your AI...">
    <button id="streamBtn">Start Streaming</button>
    <div id="streamOutput"></div>
  </div>

</main>

<footer>
  <p>Powered by <a href="https://puter.com" target="_blank" style="color:#4fc3f7;">Puter.com</a></p>
</footer>

<script>
/* --- Demo Timer & Splash --- */
let demoTime = 60*60*1000; // 1 hour
let demoStart = Date.now();

function closeDemoSplash(){
  document.getElementById("demoSplash").style.display="none";
  setInterval(checkDemo, 10000); // check every 10 seconds for demo end
}

function checkDemo(){
  if(Date.now() - demoStart > demoTime){
    document.getElementById("donationSplash").style.display="flex";
  }
}

/* --- Model Descriptions --- */
const modelDescriptions = {
  "gpt-5-mini": "GPT-5 Mini: Fast, small-scale general AI.",
  "gpt-5": "GPT-5: Full-scale general-purpose AI.",
  "gpt-4o-mini": "GPT-4o Mini: Lightweight, versatile AI.",
  "gpt-4.1-nano": "GPT-4.1 Nano: Ultra-small, fast AI.",
  "claude-1": "Claude 1: Helpful AI assistant by Anthropic.",
  "claude-2": "Claude 2: More advanced Claude with reasoning.",
  "gemini-1": "Google Gemini 1: Balanced for creativity and reasoning.",
  "gemini-1.5": "Gemini 1.5: Improved Gemini with extended knowledge.",
  "grok-3.5": "Grok 3.5: Conversational AI for Slack and general tasks.",
  "grok-4": "Grok 4: More advanced Grok AI.",
  "deep-seek": "Deep Seek: Analytical AI for data and insights."
};

/* --- Update Info --- */
function updateModelInfo() {
  const select = document.getElementById("chatModel");
  document.getElementById("modelInfo").textContent = modelDescriptions[select.value] || "";
}
function updateStreamInfo() {
  const select = document.getElementById("streamModel");
  document.getElementById("streamInfo").textContent = modelDescriptions[select.value] || "";
}

/* --- Normalize Puter AI Response --- */
function normalize(resp) {
  if (typeof resp === "string") return resp;
  if (resp?.output_text) return resp.output_text;
  if (resp?.text) return resp.text;
  if (resp?.message?.content) {
    if (Array.isArray(resp.message.content)) {
      return typeof resp.message.content[0] === "string"
        ? resp.message.content[0]
        : resp.message.content[0]?.text ?? JSON.stringify(resp.message.content);
    }
    return typeof resp.message.content === "string"
      ? resp.message.content
      : JSON.stringify(resp.message.content);
  }
  return JSON.stringify(resp ?? {});
}

/* --- Chat Function --- */
async function runChat(){
  const input = document.getElementById("chatInput").value.trim();
  const model = document.getElementById("chatModel").value;
  const out = document.getElementById("chatOutput");
  if(!input) return alert("Please enter a question!");
  out.innerHTML = "‚è≥ Thinking...";
  try {
    const reply = await puter.ai.chat(input, { model });
    out.innerHTML = `<b>${model} says:</b><br>${normalize(reply)}`;
  } catch(err) {
    out.innerHTML = "‚ùå Error: " + (err.message || err);
  }
}

/* --- Streaming Function --- */
document.getElementById("streamBtn").addEventListener("click", async () => {
  const prompt = document.getElementById("streamInput").value.trim();
  const model = document.getElementById("streamModel").value;
  const out = document.getElementById("streamOutput");
  if(!prompt) return alert("Please enter a prompt!");
  out.innerHTML = "";
  try {
    const stream = await puter.ai.chat(prompt, { model, stream: true });
    for await (const part of stream) {
      out.innerHTML += (part?.output_text ?? part?.text ?? "");
    }
  } catch(err) {
    out.innerHTML = "‚ùå Error streaming response: " + (err.message || err);
  }
}

/* --- Initialize --- */
updateModelInfo();
updateStreamInfo();
</script>

</body>
</html>
