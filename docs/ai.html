<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Product & Companion Playground</title>
<script src="https://js.puter.com/v2/"></script>
<style>
body {
    background: linear-gradient(135deg, #0f0f0f, #0a0a2a, #1a0a2a);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    margin: 0; padding: 20px;
}
h1 { text-align: center; color: turquoise; margin-bottom: 20px; }
.card {
    background: rgba(20,20,40,0.85);
    border-radius: 12px;
    padding: 20px;
    margin: 20px auto;
    max-width: 600px;
    box-shadow: 0 0 15px turquoise;
}
select, input, button {
    padding: 10px; margin: 10px 0; border-radius: 8px; border: none; font-size: 1em;
}
select, input { width: 100%; background: #111; color: white; }
button { background: turquoise; color: black; font-weight: bold; cursor: pointer; }
#chat { background: #111; padding: 15px; border-radius: 12px; height: 300px; overflow-y: auto; }
.locked-overlay {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.95); display:flex; flex-direction:column;
    justify-content:center; align-items:center; font-size:1.5em; color:white; z-index:1000; display:none;
    text-align:center;
}
.social-buttons { position: fixed; bottom: 10px; right: 10px; display: flex; flex-direction: column; gap: 8px; }
.social-buttons a { color: turquoise; text-decoration: none; font-weight: bold; background: #111; padding: 5px 10px; border-radius: 6px; }
.heart {
    position: absolute;
    font-size: 24px;
    animation: floatUp 2s ease-out forwards;
}
@keyframes floatUp {
    0% { opacity:1; transform: translateY(0); }
    100% { opacity:0; transform: translateY(-100px); }
}
</style>
</head>
<body>

<h1>üíñ AI Product & Companion Playground üíñ</h1>

<div class="card">
  <h2>1Ô∏è‚É£ Select AI Model & Companion</h2>
  <select id="modelSelect">
    <option value="gpt-5-nano">GPT-5 Nano</option>
    <option value="gpt-5-mini">GPT-5 Mini</option>
    <option value="gpt-4o-mini">GPT-4o Mini</option>
  </select>

  <select id="companionSelect">
    <option value="girlfriend">AI Girlfriend</option>
    <option value="boyfriend">AI Boyfriend</option>
    <option value="nonbinary">AI Non-Binary / LGBTQ+</option>
  </select>
</div>

<div class="card">
  <h2>2Ô∏è‚É£ Select Product</h2>
  <select id="productSelect">
    <option>Loading products...</option>
  </select>
</div>

<div class="card">
  <h2>3Ô∏è‚É£ Ask AI</h2>
  <input type="text" id="userPrompt" placeholder="Ask about a product, review, or companion...">
  <button id="askButton">üí¨ Ask AI</button>
  <div id="chat"></div>
</div>

<div class="locked-overlay" id="lockOverlay">
  <p>üíî Demo expired! Don't leave me, I love you! üíñ</p>
  <p>Support unlimited AI access by sending a coding cookie üç™ (min ¬£20) to <a href="https://wise.com/pay/me/davids14542" target="_blank" style="color:#ff0;">Wise</a>.</p>
</div>

<div class="social-buttons">
    <a href="https://www.tiktok.com/@linkbotlabs" target="_blank">TikTok</a>
    <a href="https://twitter.com/linkbotlabs" target="_blank">X</a>
    <a href="https://www.youtube.com/@linkbotlabs" target="_blank">YouTube</a>
    <a href="https://www.facebook.com/linkbotlabs" target="_blank">Facebook</a>
</div>

<script>
// Load products.json
let products = [];
const productSelect = document.getElementById('productSelect');
fetch('products.json')
.then(res => res.json())
.then(data => {
    products = data.products || [];
    productSelect.innerHTML = '';
    products.forEach(p => {
        const opt = document.createElement('option');
        opt.value = p.id || p.name;
        opt.textContent = `${p.name} - ${p.price || 'N/A'}`;
        productSelect.appendChild(opt);
    });
});

// Demo timer
let secondsLeft = 3600; // 1 hour
const lockOverlay = document.getElementById('lockOverlay');
function updateTimer() {
    if(secondsLeft <=0){ lockOverlay.style.display='flex'; return; }
    secondsLeft--; setTimeout(updateTimer,1000);
}
updateTimer();

// Floating hearts
function spawnHeart() {
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.style.left = Math.random()*window.innerWidth+'px';
    heart.textContent = 'üíñ';
    document.body.appendChild(heart);
    setTimeout(()=>document.body.removeChild(heart),2000);
}
setInterval(spawnHeart, 1000);

// Puter.js integration
const askButton = document.getElementById('askButton');
const chatDiv = document.getElementById('chat');
const modelSelect = document.getElementById('modelSelect');
const companionSelect = document.getElementById('companionSelect');
const userPrompt = document.getElementById('userPrompt');

askButton.onclick = async () => {
    const promptText = userPrompt.value.trim();
    const selectedProductId = productSelect.value;
    const selectedCompanion = companionSelect.value;

    if(!promptText) return;

    const product = products.find(p => p.id===selectedProductId || p.name===selectedProductId);
    let fullPrompt = `You are talking as an ${selectedCompanion} AI companion.\nUser asked: "${promptText}"\n`;

    if(product){
        fullPrompt += `Product info:\nName: ${product.name}\nPrice: ${product.price}\nDescription: ${product.description}\nReview: ${product.review}\n`;
    }

    chatDiv.innerHTML += `<p><b>You:</b> ${promptText}</p>`;
    chatDiv.scrollTop = chatDiv.scrollHeight;

    try{
        const response = await puter.ai.chat(fullPrompt, { model: modelSelect.value });
        const aiText = response.output || 'Sorry, AI could not generate a response.';
        chatDiv.innerHTML += `<p><b>AI (${selectedCompanion}):</b> ${aiText}</p>`;
        chatDiv.scrollTop = chatDiv.scrollHeight;

        // TTS
        const utter = new SpeechSynthesisUtterance(aiText);
        speechSynthesis.speak(utter);
    } catch(e){
        chatDiv.innerHTML += `<p><b>AI:</b> Error connecting to AI.</p>`;
    }
};
</script>

</body>
</html>
