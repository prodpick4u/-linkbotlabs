<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LinkBotLabs Affiliate Access & Product Page</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<script src="https://js.puter.com/v2/"></script>
<style>
body { font-family:'Inter',sans-serif; background: linear-gradient(-45deg,#0a0033,#1b004d,#1a1a66,#3b007f); background-size:400% 400%; animation:gradientShift 20s ease infinite; color:#fff; padding:2rem; text-align:center; }
@keyframes gradientShift {0%{background-position:0% 50%;}25%{background-position:50% 50%;}50%{background-position:100% 50%;}75%{background-position:50% 50%;}100%{background-position:0% 50%;}}
.glass { background:rgba(0,0,0,0.5); backdrop-filter:blur(10px); padding:20px; border-radius:12px; margin-bottom:20px; }
input, button { padding:10px; margin:5px; border-radius:6px; border:none; font-size:14px; }
button { background:linear-gradient(135deg,#6a11cb,#2575fc); color:#fff; font-weight:600; cursor:pointer; }
button:hover { opacity:0.85; }
.output { margin-top:10px; color:#0f0; font-weight:600; }
.ai-chat { position: fixed; bottom: 1rem; right: 1rem; background: rgba(0,0,0,0.7); border-radius:50%; width:60px; height:60px; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:999; font-size:1.8rem; }
.ai-products { display:flex; flex-wrap:wrap; justify-content:center; gap:1rem; margin-top:1.5rem; }
.ai-card { background: rgba(0,0,0,0.55); padding:1rem; border-radius:8px; width:220px; text-align:center; }
.ai-card img { width:100%; border-radius:6px; margin-bottom:0.5rem; }
</style>
</head>
<body>

<h1>🔑 LinkBotLabs Affiliate Access</h1>
<p>Buy 1 product via our page to receive your unique access code. Enter it below to unlock your affiliate account and AI features.</p>

<div class="glass">
  <label>Access Code:
    <input type="text" id="accessCode" placeholder="Enter your code">
  </label>
  <button onclick="checkAccessCode()">Unlock Access</button>
  <div id="accessOutput" class="output"></div>
</div>

<div id="affiliateForm" class="glass" style="display:none;">
  <p>Once unlocked, register your Affiliate ID. All product links you share will automatically include your tag.</p>
  <label>Affiliate ID:
    <input type="text" id="affiliateID" placeholder="Your Affiliate ID">
  </label>
  <button onclick="saveAffiliate()">Register Affiliate</button>
  <div id="affiliateOutput" class="output"></div>
</div>

<section class="glass" style="display:none;" id="aiSection">
<h2>🤖 AI Product & Trend Assistant</h2>
<p>Ask our AI about trending products, reviews, or generate video scripts. Stay ahead with daily updated recommendations.</p>
<button id="aiBtn">Ask AI a Question</button>

<div class="ai-products" id="aiProducts"></div>
</section>

<script>
let AFFILIATE_TAG = localStorage.getItem('affiliateTag') || "";
const VALID_CODES = ["starter123","user456","demo789"]; // Each code is issued after a product purchase

function checkAccessCode(){
  const code = document.getElementById("accessCode").value.trim();
  const output = document.getElementById("accessOutput");
  if(VALID_CODES.includes(code)){
    document.getElementById("affiliateForm").style.display="block";
    document.getElementById("aiSection").style.display="block";
    output.innerText = "✅ Access granted! Register your Affiliate ID.";
  } else {
    output.innerText = "❌ Invalid code. Contact developer if you just purchased a product.";
  }
}

function saveAffiliate(){
  const tag = document.getElementById("affiliateID").value.trim();
  if(tag){
    AFFILIATE_TAG = tag;
    localStorage.setItem('affiliateTag', tag);
    document.getElementById("affiliateOutput").innerText = `✅ Affiliate ID "${tag}" saved! All your product links now include this tag.`;
    alert(`Your affiliate tag "${tag}" is now active!`);
    generateAIProducts("Trending");
  }
}

// AI Chat / Question
document.getElementById('aiBtn').addEventListener('click', async ()=>{
  const question = prompt("🤖 Ask a product question or request trending recommendations:");
  if(!question) return;
  try{
    const response = await puter.ai.chat(question, {model:"gpt-5"});
    alert("AI Response:\n\n" + response.text);
  } catch(e){
    alert("AI failed to respond, try again.");
  }
});

// AI Product Generation (Daily Updated / Trending)
const aiProductsContainer = document.getElementById('aiProducts');
async function generateAIProducts(category = "Trending"){
  if(!AFFILIATE_TAG) return; // must have affiliate ID
  aiProductsContainer.innerHTML = "";
  try{
    const response = await puter.ai.chat(
      `Generate 5 trending Amazon products for ${category} category, JSON format [{name, link}]`,
      {model:"gpt-5"}
    );
    let products = [];
    try{ products = JSON.parse(response.text); } catch{ products = Array.from({length:5},(_,i)=>({name:`${category} Product ${i+1}`, link:"#"})); }

    for(const p of products){
      const card = document.createElement('div');
      card.className = "ai-card";
      try{
        const imgEl = await puter.ai.txt2img(`High-quality photo of ${p.name}, realistic, white background, professional lighting`, {model:"dall-e"});
        imgEl.style.width="100%";
        imgEl.style.borderRadius="6px";
        card.appendChild(imgEl);
      } catch(e){
        const fallbackImg = document.createElement('img');
        fallbackImg.src = "https://via.placeholder.com/220x140.png?text=Product";
        card.appendChild(fallbackImg);
      }
      const title = document.createElement('h4');
      title.innerText = p.name;
      card.appendChild(title);
      const btn = document.createElement('a');
      btn.href = p.link + (p.link.includes('?') ? '&' : '?') + 'tag=' + AFFILIATE_TAG;
      btn.className = "btn";
      btn.innerText = "Buy Now";
      card.appendChild(btn);
      aiProductsContainer.appendChild(card);
    }

  } catch(err){
    console.warn("AI product fetch failed.", err);
  }
}
</script>
</body>
</html>
