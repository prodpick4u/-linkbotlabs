<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prodpick4U Affiliate Starter Page</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap">
<style>
body {
  font-family:'Inter',sans-serif;
  margin:0; padding:2rem;
  color:#fff;
  background: linear-gradient(-45deg,#0a0033,#3b007f,#1a1aff,#6f00ff);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
}
@keyframes gradientShift {
  0%{background-position:0% 50%;}
  25%{background-position:50% 50%;}
  50%{background-position:100% 50%;}
  75%{background-position:50% 50%;}
  100%{background-position:0% 50%;}
}
h1,h2 { color:#9cf; }
h1 { text-align:center; font-size:2.5rem; margin-bottom:1rem; }
p { line-height:1.5; }
.glass {
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(10px);
  border-radius:12px;
  padding:20px;
  margin-bottom:2rem;
}
input, button, select {
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:5px;
  border:none;
}
input, select { background: rgba(20,20,20,0.7); color:#fff; }
button {
  background: #6a11cb;
  background: linear-gradient(135deg,#6a11cb,#2575fc);
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
button:hover { opacity:0.85; }
.output { background:rgba(0,0,0,0.7); padding:15px; border-radius:8px; margin-top:15px; color:#0f0; white-space:pre-wrap; }
.section-title { font-size:1.5rem; margin-bottom:1rem; text-align:center; }
.chat-box { background: rgba(0,0,0,0.6); padding:15px; border-radius:8px; max-height:300px; overflow-y:auto; margin-bottom:10px; }
.chat-input { display:flex; gap:5px; }
.chat-input input { flex:1; }
.timer { text-align:center; font-size:1rem; margin-bottom:1rem; color:#ff0; }
</style>
</head>
<body>

<h1>üöÄ Prodpick4U Affiliate Starter Page</h1>
<p style="text-align:center;">Try the demo with our default affiliate links. Once you register, your own Amazon Affiliate tag will be used for all products for 1 week.</p>

<!-- 1Ô∏è‚É£ Timer for User Demo -->
<div id="demoTimer" class="timer"></div>

<!-- 2Ô∏è‚É£ Registration Form -->
<div class="glass">
<h2 class="section-title">üìù Register Your Affiliate Tag</h2>
<p>Enter your Amazon Affiliate Tag to replace our links with yours and run your 1-week free demo.</p>
<form id="affiliateForm">
<label>Your Amazon Affiliate Tag:
  <input id="userAffiliate" type="text" placeholder="mytag-20" required>
</label>
<button type="submit">Activate Demo</button>
</form>
<div id="regOutput" class="output"></div>
</div>

<!-- 3Ô∏è‚É£ Product Categories -->
<div class="glass">
<h2 class="section-title">üóùÔ∏è Products ‚Äì Default Fallback (Yours at top)</h2>
<label>Select a category:
<select id="categorySelect">
  <option value="">--Choose a Category--</option>
  <option value="health">Health</option>
  <option value="beauty">Beauty</option>
  <option value="kitchen">Kitchen</option>
  <option value="tech">Tech</option>
  <option value="outdoors">Outdoors</option>
  <option value="household">Household</option>
  <option value="home-decor">Home Decor</option>
</select>
</label>
<div id="productOutput" class="output"></div>
</div>

<!-- 4Ô∏è‚É£ AI Q&A Bot -->
<div class="glass">
<h2 class="section-title">ü§ñ Ask the Bot</h2>
<div id="chatBox" class="chat-box"></div>
<div class="chat-input">
<input type="text" id="chatInput" placeholder="Ask about the tool, API keys, or workflow...">
<button onclick="askBot()">Send</button>
</div>
</div>

<script>
// ==========================
// 1Ô∏è‚É£ Fallback Products Data
// ==========================
const FALLBACK_PRODUCTS = {
  "health":[
    {title:"Fitbit Charge 5 Advanced Fitness & Health Tracker", url:"https://www.amazon.com/dp/B0DGPQKF2W?tag=mychanneld-20", price:"$129.95", description:"Fitness tracker with built-in GPS and health metrics."},
    {title:"Theragun Elite Handheld Percussive Therapy Device", url:"https://amzn.to/3Hm7HiH", price:"$299.00", description:"Deep muscle treatment massage device."},
    {title:"Methylene Blue", url:"https://amzn.to/4ldkJwL", price:"Varies", description:"Supplement researched for mitochondrial support and cognitive function."},
    {title:"Irish Sea Moss", url:"https://www.amazon.com/dp/B0CTMJYZ73?tag=mychanneld-20", price:"Varies", description:"Rich in iodine and essential minerals for immune and thyroid support."},
    {title:"Shilajit", url:"https://amzn.to/4li6vuC", price:"Varies", description:"Ancient herbal resin used to boost energy, vitality, and performance."},
  ],
  "beauty":[
    {title:"Revlon One-Step Hair Dryer And Volumizer Hot Air Brush", url:"https://amzn.to/40SbniQ", price:"$59.99", description:"Hair styling tool for drying and volumizing."},
    {title:"Olay Regenerist Micro-Sculpting Cream Face Moisturizer", url:"https://amzn.to/41r3Ibr", price:"$25.99", description:"Anti-aging facial moisturizer."},
    {title:"Neutrogena Makeup Remover Cleansing Towelettes", url:"https://amzn.to/40OFPdO", price:"$9.99", description:"Gentle wipes for makeup removal."},
    {title:"Maybelline Lash Sensational Washable Mascara", url:"https://amzn.to/4opz1NO", price:"$7.99", description:"Volumizing mascara with buildable formula."},
    {title:"CeraVe Hydrating Facial Cleanser", url:"https://amzn.to/3J34u8n", price:"$14.99", description:"Gentle face cleanser for normal to dry skin."},
  ],
  "kitchen":[
    {title:"Instant Pot Duo 7-in-1 Electric Pressure Cooker", url:"https://amzn.to/4oD8b50", price:"$89.00", description:"Multi-functional pressure cooker."},
    {title:"Lodge Cast Iron Skillet", url:"https://amzn.to/47igIUx", price:"$24.99", description:"Durable pre-seasoned cast iron pan."},
    {title:"Breville The Smart Oven Air Fryer", url:"https://amzn.to/45lPvxL", price:"$279.95", description:"Countertop convection oven with air fryer."},
    {title:"KitchenAid Artisan Tilt-Head Stand Mixer", url:"https://amzn.to/45lPCJH", price:"$379.99", description:"Versatile stand mixer for baking."},
    {title:"Cuisinart 14-Cup Food Processor", url:"https://amzn.to/3UgiUEs", price:"$149.95", description:"Powerful food processor for chopping and slicing."},
    {title:"Ninja Foodi 9-in-1 Pressure Cooker and Air Fryer", url:"https://amzn.to/3H8Olh3", price:"$199.99", description:"Multi-cooker with air frying and pressure cooking features."},
    {title:"NutriBullet Pro High-Speed Blender/Mixer System", url:"https://amzn.to/47eVzKT", price:"$89.99", description:"Compact blender for smoothies and shakes."},
    {title:"Hydro Flask Stainless Steel Water Bottle", url:"https://amzn.to/4myBCTZ", price:"$39.95", description:"Vacuum insulated bottle keeps drinks cold or hot."},
  ],
  "tech":[
    {title:"Apple AirPods Pro (2nd Generation)", url:"https://amzn.to/3UAYMx7", price:"$249.00", description:"Premium ANC, deep spatial audio, seamless Apple ecosystem, and excellent build quality."},
    {title:"Samsung Galaxy Buds FE (Fan Edition)", url:"https://amzn.to/4m6BhIh", price:"$99.99", description:"Reliable ANC, auto device switching, balanced audio."},
    {title:"Anker Soundcore P20i", url:"https://amzn.to/4mqytoV", price:"$29.99", description:"Budget-friendly wireless earbuds with decent ANC."},
    {title:"Samsung T7 Portable SSD 1TB", url:"https://amzn.to/3J1xAor", price:"$139.99", description:"Fast external solid state drive."},
    {title:"Logitech MX Master 3 Advanced Wireless Mouse", url:"https://amzn.to/3J43Ib5", price:"$99.99", description:"Ergonomic wireless mouse with customizable buttons."},
    {title:"Sony WH-1000XM4 Wireless Noise-Cancelling Headphones", url:"https://amzn.to/40OGbkE", price:"$348.00", description:"Industry-leading noise cancelling headphones."},
    {title:"Kindle Paperwhite ‚Äì Now Waterproof", url:"https://amzn.to/4ftSYyW", price:"$139.99", description:"Waterproof e-reader with high-resolution display."},
  ],
  "outdoors":[
    {title:"Coleman Sundome Tent", url:"https://amzn.to/4myC9oX", price:"$99.99", description:"Easy setup tent for camping."},
    {title:"LifeStraw Personal Water Filter", url:"https://amzn.to/4m3CoIw", price:"$19.97", description:"Portable water purifier for outdoor use."},
    {title:"Etekcity Lantern Camping Lantern", url:"https://amzn.to/41tkYwL", price:"$23.99", description:"LED lantern with adjustable brightness."},
    {title:"Osprey Atmos AG Backpack", url:"https://amzn.to/40RUG7h", price:"$260.00", description:"Comfortable hiking backpack with ventilation."},
    {title:"Garmin GPSMAP Handheld GPS Navigator", url:"https://amzn.to/45BCoJX", price:"$399.99", description:"Rugged GPS device for outdoor navigation."},
  ],
  "household":[
    {title:"iRobot Roomba 694 Robot Vacuum", url:"https://amzn.to/4flpTp8", price:"$249.99", description:"Smart robot vacuum for home cleaning."},
    {title:"Dyson V8 Absolute Cordless Vacuum Cleaner", url:"https://amzn.to/4fll1QY", price:"$399.99", description:"Powerful cordless vacuum cleaner."},
    {title:"Instant Pot Duo Crisp Pressure Cooker and Air Fryer", url:"https://amzn.to/3J1ZhxC", price:"$159.99", description:"Multi-use pressure cooker with air fryer lid."},
    {title:"Philips Hue White and Color Ambiance Smart Bulb", url:"https://amzn.to/4fxUPCY", price:"$49.99", description:"Smart LED bulb with app control."},
    {title:"Nespresso Vertuo Coffee and Espresso Maker", url:"https://amzn.to/46LByvu", price:"$199.00", description:"Single serve coffee and espresso machine."},
  ],
  "home-decor":[
    {title:"KARMA AND LUCK Calming Spirit Amethyst Crystal Feng Shui Tree of Life", url:"https://www.amazon.com/dp/B0B8QWN9NT?tag=mychanneld-20", price:"$39.95", description:"A handcrafted amethyst crystal tree symbolizing peace and spiritual growth."},
    {title:"Linon Brooklyn Sherpa Office Chair, Ivory", url:"https://www.amazon.com/dp/B083TRV28M?tag=mychanneld-20", price:"$129.99", description:"Plush ivory sherpa upholstered office chair with adjustable height."},
    {title:"Jersey Home Decor Wall Waterfall XL", url:"https://www.amazon.com/dp/B01KP0ONSY?tag=mychanneld-20", price:"$399.99", description:"A large, wall-mounted waterfall feature adding tranquil ambiance."},
    {title:"Medify MA-40 Air Purifier with True HEPA H13 Filter", url:"https://www.amazon.com/dp/B07LGDYV3C?tag=mychanneld-20", price:"$249.99", description:"Covers up to 1,793 sq ft, removing particles down to 0.1 microns."},
    {title:"Kyzfy 24.4-Inch Relaxing Liquid Motion Lamp", url:"https://www.amazon.com/dp/B0DRBZS1DR?tag=mychanneld-20", price:"$44.95", description:"Soothing liquid motion lamp with vibrant colors."},
    {title:"VIAHART 14\" Glass Mini Aquarium", url:"https://www.amazon.com/dp/B0CRDP8TM9?tag=mychanneld-20", price:"$69.99", description:"Compact glass mini aquarium for tabletop decoration."},
  ]
};

// ==========================
// 2Ô∏è‚É£ TTS + SEO Review
// ==========================
let synth = window.speechSynthesis;
let utter; let typingInterval;

function generateSEOReview(name, keyword){
  return `${name} is a top-quality product for anyone looking for ${keyword}. Reliable, efficient, and premium quality. Perfect for daily use or gifting. Enhance your lifestyle today with ${name}.`;
}

function playTTS(text, spanId){
  stopTTS();
  utter=new SpeechSynthesisUtterance(text);
  const voices=synth.getVoices();
  utter.voice = voices.find(v=>v.name.includes("Samantha"))||voices[0];
  synth.speak(utter);
  startTyping(text, spanId);
}

function stopTTS(){ if(synth.speaking) synth.cancel(); clearInterval(typingInterval); }

function startTyping(text, spanId){ clearInterval(typingInterval); const span=document.getElementById(spanId); let i=0; span.textContent=''; typingInterval=setInterval(()=>{ if(i<text.length){ span.textContent+=text.charAt(i); i++; } else clearInterval(typingInterval); },25); }

// ==========================
// 3Ô∏è‚É£ Product Display
// ==========================
let userAffiliateTag = ""; // default empty until user registers

document.getElementById('categorySelect').addEventListener('change', e=>{
  const cat = e.target.value;
  if(!cat){ document.getElementById('productOutput').innerHTML=''; return; }
  const products = FALLBACK_PRODUCTS[cat.toLowerCase()];
  if(!products) return;
  
  // Update URLs if user has affiliate tag
  products.forEach(p=>{
    if(userAffiliateTag){
      p.url = p.url.replace(/tag=[^&]+/, `tag=${userAffiliateTag}`);
    }
  });

  let html = "";
  products.forEach((p,i)=>{
    const review = generateSEOReview(p.title, cat);
    html += `
      üõí <a href="${p.url}" target="_blank">${p.title} (${p.price})</a>
      üìù SEO Review: <span id="review${i}"></span>
      <br><button onclick="playTTS('${review}','review${i}')">üîä Play TTS</button>
      <button onclick="stopTTS()">‚èπ Stop TTS</button>
      <hr>
    `;
  });
  document.getElementById('productOutput').innerHTML = html;
});

// ==========================
// 4Ô∏è‚É£ Registration Form
// ==========================
document.getElementById('affiliateForm').addEventListener('submit', e=>{
  e.preventDefault();
  userAffiliateTag = document.getElementById('userAffiliate').value.trim();
  if(!userAffiliateTag){ alert("Enter a valid tag."); return; }
  document.getElementById('regOutput').innerHTML = `‚úÖ Affiliate tag <b>${userAffiliateTag}</b> activated. All product links updated! Your 1-week demo starts now.`;
  startDemoTimer(7); // 7 days
  document.getElementById('categorySelect').dispatchEvent(new Event('change')); // refresh links
});

// ==========================
// 5Ô∏è‚É£ Demo Timer
// ==========================
function startDemoTimer(days){
  const endTime = new Date().getTime() + days*24*60*60*1000;
  const timerDiv = document.getElementById('demoTimer');
  const interval = setInterval(()=>{
    const now = new Date().getTime();
    const distance = endTime - now;
    if(distance <= 0){
      clearInterval(interval);
      timerDiv.textContent = "‚è∞ Demo expired. Please register again to continue.";
      return;
    }
    const d = Math.floor(distance/(1000*60*60*24));
    const h = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
    const m = Math.floor((distance%(1000*60*60))/(1000*60));
    const s = Math.floor((distance%(1000*60))/1000);
    timerDiv.textContent = `‚è≥ Your demo expires in ${
